<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="static/css/index.css">
    <title>Hit The Planet!! - Gioco Intrattivo</title>
</head>

<body>

    <div class="title-banner">
        <h1 class="title-page">COLPISCI LA TALPA</h1>
    </div>

    <div class="game-information">
        <div class="start_container_">
            <h1 class="start_container-1"> </h1>
        </div>

        <div class="punteggio-container">
            <p>Punteggio: </p>
            <p class="punteggio">0</p>
        </div>

        <div class="vite-container">
            <p>Vite: </p>
            <p class="vite">10</p>
        </div>

        <div class="timer-container">
            <p>Tempo rimanente: </p>
            <p class="timer">60</p>
        </div>

        <div class="start_container">
            <h1 class="start_container-2"> </h1>
        </div>
    </div>


    <div class="container-1">
        <div class="child">
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
        </div>
        <div class="child">
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
        </div>
        <div class="child">
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
        </div>
        <div class="child">
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
        </div>
    </div>

    <div class="inizio-gioco">
        <button class="inizio-button">Inizia Gioco</button>
    </div>



    <script>
        //2. creare un ciclo con una funzione -->
        //3. creare una funzione che faccia attivare (per ora cambiare colore) un box in maniera casuale con un tempo causale
        //4. creare una funzione che tenga conto del tempo rimasto
        //5. creare una funzione che tenga conto dei punti raggiunti
        //6. creare una funzione che tenga conto della vita rimanente 
        //7. creare una funzione per i risultati finali alla fine del timer di gioco
        //8. sistemare la grafica 

        let box = document.querySelectorAll(".box");
        let start = document.querySelector(".inizio-button");
        let start_timer_1 = document.querySelector(".start_container-1");
        let start_timer_2 = document.querySelector(".start_container-2");
        let box_selected = null;
        let GameOver = false;
        let punteggio_ = document.querySelector(".punteggio")
        let vite = document.querySelector(".vite");
        let vite_ = 10;
        let timer = document.querySelector(".timer");
        timer = null;

        start.addEventListener("click", function () {
            start_timer_1.innerHTML = "3";
            start_timer_2.innerHTML = "3";
            setTimeout(game1, 1000);
        })

        function game1() {
            start_timer_1.innerHTML = "2";
            start_timer_2.innerHTML = "2";
            setTimeout(game2, 1000);
        }

        function game2() {
            start_timer_1.innerHTML = "1";
            start_timer_2.innerHTML = "1";
            setTimeout(start_game, 500)
        }

        function start_game() {
            start_timer_1.innerHTML = "Start!!";
            start_timer_2.innerHTML = "Start!!";
            setTimeout(game, 0)
        }

        function gameOver() {
            // Stoppi tutti i timer
        }

        function game() {
            start.disabled = true;
            let punteggio = 0;
            let time_left = 60;

            timer = setInterval(function () {
                time_left = time_left - 1
                // controllo se arrivo a zero e in caso dÃ² il game over
                // clear interval di tutti i timer presenti
                document.querySelector(".timer").innerHTML = time_left
            }, 1000)


            /* QUESTO lo dobbiamo fare ogni tot secondi */
            const randomInteger = Math.floor(Math.random() * box.length);
            console.log(randomInteger)
            box_selected = box[randomInteger];
            box_selected.classList.add("selected");
            function gestisciClick() {
                if (!GameOver) {
                    punteggio++;
                    punteggio_.innerHTML = punteggio;
                    box_selected.classList.remove("selected");

                } else {
                    vite.innerHTML = vite_.value - 1;
                }
            }

            box_selected.addEventListener("click", gestisciClick)
            /* dobbiamo anche RIMUOVERE l'event listener dopo N secondi */

            setTimeout(function () {
                box_selected.classList.remove("selected");
                box_selected.removeEventListener("click", gestisciClick)
            }, 1500)

            /*
            do{
                timer=setInterval(() => {
                    time_left--
                    timer.textContent= time_left;

                })

            }while(time_left===0)

                do{
                    const randomInteger = Math.floor(Math.random() * box.length);
                    box_selected=box[randomInteger];
                    box_selected.classList.add("selected");

                    box_selected.addEventListener("click", function(){
                        if(!GameOver){
                            punteggio++;
                            punteggio_.innerHTML= punteggio;
                            box_selected.classList.remove("selected"); 

                        }else{
                            vite.innerHTML= vite_.value-1;
                        }
                    })
                }while(vite_.value===0)

                */



        }




    </script>
</body>

</html>